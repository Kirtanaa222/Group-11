<h2>Admin Dashboard</h2>
<div id="users"></div>

<script>
  async function loadUsers() {
    const res = await fetch('/admin/users');
    const users = await res.json();
    const container = document.getElementById('users');
    container.innerHTML = '';

    users.forEach(u => {
      const div = document.createElement('div');
      div.innerHTML = `
        <p>${u.username} (${u.user_email}) - ${u.status}</p>
        ${
          u.status === 'banned'
            ? `<button onclick="unbanUser(${u.id})">Unban</button>`
            : `<button onclick="banUser(${u.id})">Ban</button>`
        }
      `;
      container.appendChild(div);
    });
  }

  async function banUser(id) {
    await fetch(`/admin/users/${id}/ban`, { method: 'PATCH' });
    loadUsers();
  }

  async function unbanUser(id) {
    await fetch(`/admin/users/${id}/unban`, { method: 'PATCH' });
    loadUsers();
  }

  loadUsers();
</script>